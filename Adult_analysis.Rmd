---
title: "adult_mortality"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(foreign)
library(pbapply)
library(dplyr)

source('./R/import_brazil_mortality.R')
```

Import Data from Brazil
```{r}
#import_brazil_func()
```

```{r}
a1 <- readRDS('./Data/Brazil/Mortality/all_deaths_compiled.rds')

a1$age <- as.numeric(as.character(a1$age))
a1 <- a1[!is.na(a1$id),]

 table(a1$age_type) #What is age_type 1 or 9?

 a1$agey <- NA 
a1$agey[a1$age_type=='4' & !is.na(a1$age)]  <- a1$age[a1$age_type=='4'& !is.na(a1$age)]
a1$agey[a1$age_type=='1' & !is.na(a1$age)]  <- a1$age[a1$age_type=='1'& !is.na(a1$age)]/(24*365)

a1$agey[a1$age_type=='2' & !is.na(a1$age)]  <- a1$age[a1$age_type=='2'& !is.na(a1$age)]/365
a1$agey[a1$age_type=='3' & !is.na(a1$age)]  <- a1$age[a1$age_type=='3'& !is.na(a1$age)]/12
a1$agey[a1$age_type=='5' & !is.na(a1$age)]  <- a1$age[a1$age_type=='5'& !is.na(a1$age)]+100

hist(a1$agey)

sum(is.na(a1$agey))/nrow(a1)*100 #What percent of deaths missing an age classification?
```


